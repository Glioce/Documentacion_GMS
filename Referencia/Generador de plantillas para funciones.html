<!DOCTYPE html>
<html>
<head>
 <title>Generador de plantillas de funciones</title>
 <meta charset="utf-8">
 <style type="text/css">
  input, button, textarea
  {
   background-color:transparent;
   height:2em;
   border:1px solid #444;
   font-family: inherit;
   font-size: inherit;
   color:inherit;
  }
  textarea{width: 100%; min-height: 192px; resize: vertical;}
  }
  table
  {
   width:100%;
  }
  table td, table th
  {
   border-collapse: collapse;
   border:1px solid #555;
   padding: 0.6em 1em;
  }
  #result
  {
   display: none;
  }
 </style>
</head>
<body>
<div>
 Generador de plantillas función/variable. Puedes usar formato HTML. <br><br>
 <div id="form">
  <input type="text" id="func-name" placeholder="Nombre de la función o variable..." style="width:100%" /><br>
  <input type="text" id="func-desc" placeholder="Descripción de la función o variable..." style="width:100%" /><br>
  <input type="text" id="func-syntax" placeholder="Síntaxis de la función o variable..." style="width:100%" /><br><br>
  <h2>Argumentos</h2>
  <input type="number" min=0 max=16 id="argnum" placeholder="Número de parámetros"/> <button onclick="add_args();" id="arg-set">Generar</button>
  <table id="arg-list">
   <tr><th>Argumento</th><th>Descripción</th></tr>
  </table><br><br>
  <h2>Descripción</h2>
  <textarea id="long" placeholder="Descripción larga"></textarea>
  <h2>Devuelve</h2>
  <input type="text" id="return" placeholder="Devuelve (ej: real, cadena, arreglo, nada, etc.)..." style="width:100%" />
  <h2>Ejemplo</h2>
  <textarea id="code" placeholder="Código de ejemplo..."></textarea>
  <textarea id="codex" placeholder="Explicación del ejemplo..."></textarea><br><br>
 </div>

 <div id="result">
  Copia y pega este código en el archivo <tt>.html</tt>:
  <h2>Resultado</h2>
  <textarea id="box-result"></textarea>
 </div>
  
 <button id="action" onclick="generate_html();"><b>GENERAR</b></button>
</div>

<script type="text/javascript">
function add_args()
{
 var table = getid("arg-list");
 var trs   = table.getElementsByTagName("tr");

 var numb = document.getElementById("argnum").value;
 numb = numb == "" ? 0: parseInt(numb);
 
 if((trs.length - 1) < numb)
 {
  console.log(trs.length);
  var a = (numb - trs.length + 1)*1;
  console.log(a);
  for(var i = 0; i < a; i++)
  {
   var tr = document.createElement("tr");
   table.appendChild(tr);

   tr.innerHTML = `<td><input type="text" style="width:100%" placeholder="Argumento..."/></td><td><input type="text" placeholder="Descripción..." style="width:100%"/></td>`;
  }
 }
 else if((trs.length - 1) > numb)
 {
  for(var i = trs.length - 1; i > numb; i--)
  {
   trs[i].parentNode.removeChild(trs[i]);
  }
 }
}
function generate_html()
{
 switch(getid("form").style.display)
 { 
  case "": 
   getid("form").style.display = "none";
   getid("result").style.display = "block";
   getid("action").innerHTML = "<b>VOLVER</b>";

   var nombre = getid("func-name").value;
   var descr1 = getid("func-desc").value;
   var syntax = getid("func-syntax").value;
   var longds = getid("long").value;
   var Return = getid("return").value;
   var code   = getid("code").value;
   var codex  = getid("codex").value;

   var divn = document.createElement("div");
   divn.setAttribute("id", "name");
   divn.innerHTML = nombre;

   var divc = document.createElement("div");
   divc.setAttribute("id", "content");

   addElement(divc, "div", "description", descr1);
   addElement(divc, "h2", "", "Síntaxis");
   addElement(divc, "div", "syntax", `<pre class="gml-syntax">${syntax}</pre>`);

   addElement(divc, "h2", "", "Argumentos");
   var argt = addElement(divc, "table", "arguments", "");
   addElement(argt, "tr", "", "<th>Argumento</th><th>Descripción</th>");


   var table = getid("arg-list").getElementsByTagName("tr");
   for(var i = 1; i < table.length; i++)
   {
    var inp = table[i].getElementsByTagName("input");
    addElement(argt, "tr", "", `<td>${inp[0].value}</td><td>${inp[1].value}</td>`);
   }

   addElement(divc, "h2", "", "Descripción");
   addElement(divc, "div", "longdescription", longds);

   addElement(divc, "h2", "", "Devuelve");
   addElement(divc, "div", "returns", Return);

   addElement(divc, "h2", "", "Ejemplo");
   addElement(divc, "div", "example", `<pre class="gml-syntax">${code}</pre>${codex}`);

   getid("box-result").innerHTML = "";
   getid("box-result").appendChild(divn);
   getid("box-result").appendChild(divc);
   getid("box-result").value = getid("box-result").innerHTML;
   break;
  default:
   getid("form").style.display = "";
   getid("result").style.display = "none";
   getid("action").innerHTML = "<b>GENERAR</b>";
   break;
 }
}
function getid(id)
{
 return document.getElementById(id);
}
function addElement(parent, child, id, html)
{
 var e = document.createElement(child);
 if(id !== null && id !== "")
  e.setAttribute("id", id);
 if(html !== null && html !== "")
  e.innerHTML = html;

 parent.appendChild(e);
 return e;
}
</script>
</body>
</html>